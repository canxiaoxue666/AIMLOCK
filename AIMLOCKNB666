--===========================================--
--          æé€Ÿè‡ªç„è„šæœ¬ v3.0 (ç»ˆæè±ªåç‰ˆ)  --
--  ç‰¹ç‚¹ï¼šæ™ºèƒ½é”å¤´/åŠ¨æ€é¢„åˆ¤/å¯è§†åŒ–è¿½è¸ª      --
--          GUIæ§åˆ¶/ç”µå½±çº§ç‰¹æ•ˆ/æµç•…åŠ¨ç”»      --
--          å¼€å‘è€…ï¼š@æ–­æ¡¥æ®‹é›ª               --
--===========================================--

-- ğŸ”§ é«˜çº§é…ç½®åŒº --
getgenv().Settings = {
    -- ğŸ¯ æ ¸å¿ƒè®¾ç½®
    AimPart = "Head",          -- é»˜è®¤ç„å‡†éƒ¨ä½
    OldAimPart = "Head",       -- å¤‡ç”¨ç„å‡†éƒ¨ä½
    AimlockKey = Enum.UserInputType.MouseButton2,
    AimRadius = 80,            -- é”å®šèŒƒå›´(åƒç´ )
    TeamCheck = false,         -- æ˜¯å¦å¿½ç•¥é˜Ÿå‹
    CheckIfJumped = true,      -- è·³è·ƒæ—¶è‡ªåŠ¨é”å¤´
    DrawFOV = true,            -- æ˜¾ç¤ºç„å‡†èŒƒå›´
    FOVVisible = true,         -- FOVå¯è§æ€§
    
    -- ğŸš€ é€Ÿåº¦æ§åˆ¶ç³»ç»Ÿ
    Speed = {
        Base = 2.5,            -- åŸºç¡€é€Ÿåº¦
        CloseBoost = 0.4,      -- è¿‘è·ç¦»åŠ é€Ÿ
        FarReduce = 0.25,      -- è¿œè·ç¦»å‡é€Ÿ 
        Min = 1.5,             -- æœ€ä½é€Ÿåº¦
        Max = 5.0              -- æœ€é«˜é€Ÿåº¦
    },
    
    -- ğŸ“ˆ é¢„åˆ¤ç³»ç»Ÿ
    Prediction = {
        Base = 4.0,            -- åŸºç¡€é¢„åˆ¤å€¼
        Min = 2.5,             -- æœ€å°é¢„åˆ¤å€¼
        DistanceFactor = 250   -- è·ç¦»å½±å“ç³»æ•°
    }
}

-- ğŸ› ï¸ åˆå§‹åŒ–æœåŠ¡ --
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local Client = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = Client:GetMouse()

-- ğŸ¨ åˆ›å»ºé¡¶çº§GUI --
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AimlockPremiumUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- ğŸ’ è±ªåæ°´å°ç³»ç»Ÿ --
local Watermark = Instance.new("Frame")
Watermark.Name = "PremiumWatermark"
Watermark.Size = UDim2.new(0, 220, 0, 45)
Watermark.Position = UDim2.new(1, -230, 1, -50)
Watermark.AnchorPoint = Vector2.new(1, 1)
Watermark.BackgroundColor3 = Color3.fromRGB(30, 5, 50)
Watermark.BackgroundTransparency = 0.3
Watermark.Parent = ScreenGui

local WatermarkCorner = Instance.new("UICorner")
WatermarkCorner.CornerRadius = UDim.new(0, 14)
WatermarkCorner.Parent = Watermark

local WatermarkStroke = Instance.new("UIStroke")
WatermarkStroke.Color = Color3.fromRGB(180, 80, 255)
WatermarkStroke.Thickness = 2
WatermarkStroke.Transparency = 0.5
WatermarkStroke.Parent = Watermark

local WatermarkText = Instance.new("TextLabel")
WatermarkText.Size = UDim2.new(0.9, 0, 0.8, 0)
WatermarkText.Position = UDim2.new(0.5, 0, 0.5, 0)
WatermarkText.AnchorPoint = Vector2.new(0.5, 0.5)
WatermarkText.BackgroundTransparency = 1
WatermarkText.Text = "@æ–­æ¡¥æ®‹é›ª AIMLOCKNB666"
WatermarkText.TextColor3 = Color3.fromRGB(230, 190, 255)
WatermarkText.Font = Enum.Font.GothamBlack
WatermarkText.TextSize = 16
WatermarkText.TextXAlignment = Enum.TextXAlignment.Right
WatermarkText.ZIndex = 2
WatermarkText.Parent = Watermark
-- æ°´å° (å±å¹•å³ä¸‹è§’å¤§å­—ä½“ç‰ˆæœ¬)
local synb666 = Instance.new("TextLabel")
synb666.Name = "synb666"
synb666.Size = UDim2.new(0, 180, 0, 30)  -- å¢å¤§å°ºå¯¸
synb666.Position = UDim2.new(1, -185, 1, -35)  -- å³ä¸‹è§’å®šä½
synb666.AnchorPoint = Vector2.new(1, 1)  -- é”šç‚¹ç¡®ä¿å§‹ç»ˆåœ¨å³ä¸‹è§’
synb666.BackgroundTransparency = 1
synb666.Text = "@æ–­æ¡¥æ®‹é›ª"
synb666.TextColor3 = Color3.fromRGB(200, 150, 255)
synb666.Font = Enum.Font.GothamBold  -- æ”¹ä¸ºç²—ä½“
synb666.TextSize = 16  -- å¢å¤§å­—å·
synb666.TextXAlignment = Enum.TextXAlignment.Right
synb666.ZIndex = 10  -- ç¡®ä¿åœ¨æœ€ä¸Šå±‚
synb666.Parent = MainFrame

-- æ·»åŠ æ–‡å­—é˜´å½±æ•ˆæœ
local TextShadow = Instance.new("TextLabel")
TextShadow.Name = "TextShadow"
TextShadow.Size = synb666.Size
TextShadow.Position = synb666.Position
TextShadow.AnchorPoint = synb666.AnchorPoint
TextShadow.BackgroundTransparency = 1
TextShadow.Text = synb666.Text
TextShadow.TextColor3 = Color3.fromRGB(0, 0, 0)
TextShadow.Font = synb666.Font
TextShadow.TextSize = synb666.TextSize
TextShadow.TextXAlignment = synb666.TextXAlignment
TextShadow.ZIndex = synb666.ZIndex - 1
TextShadow.Parent = MainFrame
TextShadow.Position = UDim2.new(synb666.Position.X.Scale, synb666.Position.X.Offset + 2, 
                               synb666.Position.Y.Scale, synb666.Position.Y.Offset + 2)


-- âœ¨ ç”µå½±çº§é€šçŸ¥ç³»ç»Ÿ --
local function ShowCinematicNotification(title, message, duration)
    local Notification = Instance.new("Frame")
    Notification.Name = "CinematicNotification"
    Notification.Size = UDim2.new(0, 300, 0, 80)
    Notification.Position = UDim2.new(1, -310, 1, -150)
    Notification.AnchorPoint = Vector2.new(1, 1)
    Notification.BackgroundColor3 = Color3.fromRGB(20, 0, 40)
    Notification.BackgroundTransparency = 1
    Notification.ClipsDescendants = true
    Notification.Parent = ScreenGui
    
    local NotificationCorner = Instance.new("UICorner")
    NotificationCorner.CornerRadius = UDim.new(0, 12)
    NotificationCorner.Parent = Notification
    
    local NotificationStroke = Instance.new("UIStroke")
    NotificationStroke.Color = Color3.fromRGB(180, 80, 255)
    NotificationStroke.Thickness = 2
    NotificationStroke.Transparency = 0.5
    NotificationStroke.Parent = Notification
    
    local GlowEffect = Instance.new("ImageLabel")
    GlowEffect.Name = "GlowEffect"
    GlowEffect.Size = UDim2.new(1, 20, 1, 20)
    GlowEffect.Position = UDim2.new(0.5, -10, 0.5, -10)
    GlowEffect.AnchorPoint = Vector2.new(0.5, 0.5)
    GlowEffect.BackgroundTransparency = 1
    GlowEffect.Image = "rbxassetid://5028857084"  -- å‘å…‰æ•ˆæœ
    GlowEffect.ImageColor3 = Color3.fromRGB(80, 0, 120)
    GlowEffect.ScaleType = Enum.ScaleType.Slice
    GlowEffect.SliceCenter = Rect.new(100, 100, 100, 100)
    GlowEffect.Parent = Notification
    
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Size = UDim2.new(0.9, 0, 0.3, 0)
    TitleLabel.Position = UDim2.new(0.05, 0, 0.1, 0)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Text = title
    TitleLabel.TextColor3 = Color3.fromRGB(255, 180, 255)
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextSize = 16
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Parent = Notification
    
    local MessageLabel = Instance.new("TextLabel")
    MessageLabel.Size = UDim2.new(0.9, 0, 0.5, 0)
    MessageLabel.Position = UDim2.new(0.05, 0, 0.4, 0)
    MessageLabel.BackgroundTransparency = 1
    MessageLabel.Text = message
    MessageLabel.TextColor3 = Color3.fromRGB(220, 200, 255)
    MessageLabel.Font = Enum.Font.Gotham
    MessageLabel.TextSize = 14
    MessageLabel.TextXAlignment = Enum.TextXAlignment.Left
    MessageLabel.TextWrapped = true
    MessageLabel.Parent = Notification
    
    -- å…¥åœºåŠ¨ç”»
    local ShowTween = TweenService:Create(
        Notification,
        TweenInfo.new(0.7, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
        {BackgroundTransparency = 0.2, Position = UDim2.new(1, -310, 1, -100)}
    )
    
    -- é€€åœºåŠ¨ç”»
    local HideTween = TweenService:Create(
        Notification,
        TweenInfo.new(0.7, Enum.EasingStyle.Quint, Enum.EasingDirection.In),
        {BackgroundTransparency = 1, Position = UDim2.new(1, -310, 1, -150)}
    )
    
    -- å‘å…‰æ•ˆæœåŠ¨ç”»
    local GlowTween = TweenService:Create(
        GlowEffect,
        TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut, -1, true),
        {ImageTransparency = 0.7}
    )
    
    ShowTween:Play()
    GlowTween:Play()
    
    delay(duration, function()
        HideTween:Play()
        HideTween.Completed:Connect(function()
            Notification:Destroy()
        end)
    end)
end

-- ğŸ–¥ï¸ ä¸»æ§åˆ¶é¢æ¿ --
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 320, 0, 420)
MainFrame.Position = UDim2.new(0.5, -160, 0.5, -210)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 5, 50)
MainFrame.BackgroundTransparency = 0.2
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- 3Dè¾¹æ¡†æ•ˆæœ
local FrameShadow = Instance.new("Frame")
FrameShadow.Size = UDim2.new(1, 6, 1, 6)
FrameShadow.Position = UDim2.new(0, -3, 0, -3)
FrameShadow.BackgroundColor3 = Color3.fromRGB(80, 0, 120)
FrameShadow.BackgroundTransparency = 0.8
FrameShadow.BorderSizePixel = 0
FrameShadow.ZIndex = -1
FrameShadow.Parent = MainFrame

local FrameCorner = Instance.new("UICorner")
FrameCorner.CornerRadius = UDim.new(0, 14)
FrameCorner.Parent = MainFrame

local FrameStroke = Instance.new("UIStroke")
FrameStroke.Color = Color3.fromRGB(180, 80, 255)
FrameStroke.Thickness = 2
FrameStroke.Transparency = 0.3
FrameStroke.Parent = MainFrame

-- æ ‡é¢˜æ 
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.BackgroundColor3 = Color3.fromRGB(60, 10, 90)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 14)
TitleCorner.Parent = TitleBar

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(0, 240, 1, 0)
Title.Position = UDim2.new(0.5, -120, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "âš¡ æ–­æ¡¥æ®‹é›ªAIMLOCK âš¡"
Title.TextColor3 = Color3.fromRGB(255, 220, 255)
Title.Font = Enum.Font.GothamBlack
Title.TextSize = 16
Title.Parent = TitleBar

-- å†…å®¹åŒºåŸŸ
local Content = Instance.new("Frame")
Content.Name = "Content"
Content.Size = UDim2.new(1, -20, 1, -55)
Content.Position = UDim2.new(0, 10, 0, 45)
Content.BackgroundTransparency = 1
Content.Parent = MainFrame

-- è‡ªåŠ¨å¸ƒå±€
local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = Content
-- ç²¾å‡†ä¿®æ­£çš„å¼€å…³æ§ä»¶å‡½æ•°
local function CreatePremiumToggle(name, text, default, callback, order)
    local ToggleFrame = Instance.new("Frame")
    ToggleFrame.Name = name.."Toggle"
    ToggleFrame.Size = UDim2.new(0.92, 0, 0, 38)
    ToggleFrame.BackgroundTransparency = 1
    ToggleFrame.LayoutOrder = order
    ToggleFrame.Parent = Content

    -- èƒŒæ™¯å®¹å™¨ï¼ˆç¡®ä¿ç‚¹å‡»åŒºåŸŸï¼‰
    local Background = Instance.new("Frame")
    Background.Size = UDim2.new(1, 0, 1, 0)
    Background.BackgroundTransparency = 1
    Background.Parent = ToggleFrame

    -- æ–‡æœ¬æ ‡ç­¾ï¼ˆå·¦å¯¹é½ï¼‰
    local ToggleLabel = Instance.new("TextLabel")
    ToggleLabel.Name = "Label"
    ToggleLabel.Size = UDim2.new(0.6, 0, 1, 0)
    ToggleLabel.Position = UDim2.new(0, 10, 0, 0)
    ToggleLabel.BackgroundTransparency = 1
    ToggleLabel.Text = text
    ToggleLabel.TextColor3 = Color3.fromRGB(230, 210, 255)
    ToggleLabel.Font = Enum.Font.GothamSemibold
    ToggleLabel.TextSize = 14
    ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
    ToggleLabel.Parent = Background

    -- å¼€å…³å®¹å™¨ï¼ˆå³å¯¹é½ï¼‰
    local ToggleContainer = Instance.new("Frame")
    ToggleContainer.Name = "SwitchContainer"
    ToggleContainer.Size = UDim2.new(0, 62, 0, 32)
    ToggleContainer.Position = UDim2.new(1, -15, 0.5, -16)
    ToggleContainer.AnchorPoint = Vector2.new(1, 0.5)
    ToggleContainer.BackgroundTransparency = 1
    ToggleContainer.Parent = Background

    -- å¼€å…³èƒŒæ™¯
    local ToggleButton = Instance.new("Frame")
    ToggleButton.Name = "Button"
    ToggleButton.Size = UDim2.new(1, 0, 1, 0)
    ToggleButton.BackgroundColor3 = default and Color3.fromRGB(100, 30, 150) or Color3.fromRGB(50, 15, 80)
    ToggleButton.Parent = ToggleContainer

    local ToggleCorner = Instance.new("UICorner")
    ToggleCorner.CornerRadius = UDim.new(0, 16) -- åœ†è§’ç¨å¤§äºæ»‘å—
    ToggleCorner.Parent = ToggleButton

    -- ç™½è‰²æ»‘å—ï¼ˆç²¾å‡†å®šä½ç‰ˆï¼‰
    local ToggleCircle = Instance.new("Frame")
    ToggleCircle.Name = "Circle"
    ToggleCircle.Size = UDim2.new(0, 26, 0, 26)
    
    -- å…³é”®ä¿®æ­£ï¼šä½¿ç”¨ç²¾ç¡®çš„é”šç‚¹è®¡ç®—
    local circleOffset = 3 -- æ»‘å—ä¸è¾¹æ¡†çš„é—´éš™
    ToggleCircle.Position = default 
        and UDim2.new(1, -circleOffset-26, 0.5, -13) -- å³ç«¯ä½ç½®
        or UDim2.new(0, circleOffset, 0.5, -13) -- å·¦ç«¯ä½ç½®
        
    ToggleCircle.AnchorPoint = Vector2.new(0, 0.5) -- å…³é”®ä¿®æ­£ç‚¹
    ToggleCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ToggleCircle.Parent = ToggleButton

    local CircleCorner = Instance.new("UICorner")
    CircleCorner.CornerRadius = UDim.new(0, 13)
    CircleCorner.Parent = ToggleCircle

    -- ç‚¹å‡»åŒºåŸŸï¼ˆè¦†ç›–æ•´ä¸ªå¼€å…³åŒºåŸŸï¼‰
    local Hitbox = Instance.new("TextButton")
    Hitbox.Size = UDim2.new(1, 0, 1, 0)
    Hitbox.BackgroundTransparency = 1
    Hitbox.Text = ""
    Hitbox.Parent = ToggleContainer

    Hitbox.MouseButton1Click:Connect(function()
        default = not default
        callback(default)
        
        -- ç²¾ç¡®çš„åŠ¨ç”»è·¯å¾„è®¡ç®—
        local targetPosition = default 
            and UDim2.new(1, -circleOffset-26, 0.5, -13) 
            or UDim2.new(0, circleOffset, 0.5, -13)
        
        local tweenInfo = TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(ToggleCircle, tweenInfo, {
            Position = targetPosition
        })
        
        local colorTween = TweenService:Create(ToggleButton, tweenInfo, {
            BackgroundColor3 = default and Color3.fromRGB(100, 30, 150) or Color3.fromRGB(50, 15, 80)
        })
        
        tween:Play()
        colorTween:Play()
    end)

    return ToggleFrame
end



-- åˆ›å»ºè±ªåæ»‘å—æ§ä»¶
local function CreatePremiumSlider(name, text, min, max, default, callback, order)
    local SliderFrame = Instance.new("Frame")
    SliderFrame.Name = name.."Slider"
    SliderFrame.Size = UDim2.new(0.95, 0, 0, 60)
    SliderFrame.BackgroundTransparency = 1
    SliderFrame.LayoutOrder = order
    SliderFrame.Parent = Content
    
    local SliderLabel = Instance.new("TextLabel")
    SliderLabel.Name = "Label"
    SliderLabel.Size = UDim2.new(1, 0, 0, 20)
    SliderLabel.BackgroundTransparency = 1
    SliderLabel.Text = text..": "..default
    SliderLabel.TextColor3 = Color3.fromRGB(230, 210, 255)
    SliderLabel.Font = Enum.Font.GothamSemibold
    SliderLabel.TextSize = 14
    SliderLabel.TextXAlignment = Enum.TextXAlignment.Left
    SliderLabel.Parent = SliderFrame
    
    local SliderContainer = Instance.new("Frame")
    SliderContainer.Size = UDim2.new(1, 0, 0, 20)
    SliderContainer.Position = UDim2.new(0, 0, 0, 30)
    SliderContainer.BackgroundTransparency = 1
    SliderContainer.Parent = SliderFrame
    
    local SliderTrack = Instance.new("Frame")
    SliderTrack.Name = "Track"
    SliderTrack.Size = UDim2.new(1, 0, 0, 6)
    SliderTrack.Position = UDim2.new(0, 0, 0.5, -3)
    SliderTrack.BackgroundColor3 = Color3.fromRGB(50, 15, 80)
    SliderTrack.Parent = SliderContainer
    
    local TrackCorner = Instance.new("UICorner")
    TrackCorner.CornerRadius = UDim.new(0, 3)
    TrackCorner.Parent = SliderTrack
    
    local SliderFill = Instance.new("Frame")
    SliderFill.Name = "Fill"
    SliderFill.Size = UDim2.new((default - min)/(max - min), 0, 1, 0)
    SliderFill.BackgroundColor3 = Color3.fromRGB(120, 40, 180)
    SliderFill.Parent = SliderTrack
    
    local FillCorner = Instance.new("UICorner")
    FillCorner.CornerRadius = UDim.new(0, 3)
    FillCorner.Parent = SliderFill
    
    local FillGradient = Instance.new("UIGradient")
    FillGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(180, 80, 255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(140, 40, 220))
    }
    FillGradient.Parent = SliderFill
    
    local SliderButton = Instance.new("Frame")
    SliderButton.Name = "Button"
    SliderButton.Size = UDim2.new(0, 18, 0, 18)
    SliderButton.Position = UDim2.new((default - min)/(max - min), -9, 0.5, -9)
    SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    SliderButton.Parent = SliderContainer
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 9)
    ButtonCorner.Parent = SliderButton
    
    local ButtonGradient = Instance.new("UIGradient")
    ButtonGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(250, 200, 255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(200, 150, 255))
    }
    ButtonGradient.Rotation = 45
    ButtonGradient.Parent = SliderButton
    
    local ButtonShadow = Instance.new("ImageLabel")
    ButtonShadow.Size = UDim2.new(1, 6, 1, 6)
    ButtonShadow.Position = UDim2.new(0.5, -3, 0.5, -3)
    ButtonShadow.AnchorPoint = Vector2.new(0.5, 0.5)
    ButtonShadow.BackgroundTransparency = 1
    ButtonShadow.Image = "rbxassetid://5028857084"
    ButtonShadow.ImageColor3 = Color3.fromRGB(100, 0, 150)
    ButtonShadow.ScaleType = Enum.ScaleType.Slice
    ButtonShadow.SliceCenter = Rect.new(100, 100, 100, 100)
    ButtonShadow.Parent = SliderButton
    
    local dragging = false
    
    local function updateValue(input)
        local x = (input.Position.X - SliderTrack.AbsolutePosition.X) / SliderTrack.AbsoluteSize.X
        x = math.clamp(x, 0, 1)
        local value = math.floor(min + (max - min) * x)
        SliderFill.Size = UDim2.new(x, 0, 1, 0)
        SliderButton.Position = UDim2.new(x, -9, 0.5, -9)
        SliderLabel.Text = text..": "..value
        callback(value)
    end
    
    SliderButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
        end
    end)
    
    UIS.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            updateValue(input)
        end
    end)
    
    return SliderFrame
end

-- åˆ›å»ºæ§ä»¶
CreatePremiumToggle("Aimlock", "è‡ªç„å¼€å…³", true, function(value)
    getgenv().AimlockEnabled = value
    ShowCinematicNotification("æ–­æ¡¥æ®‹é›ª-ç³»ç»Ÿæç¤º", value and "è‡ªç„åŠŸèƒ½å·²å¯ç”¨" or "è‡ªç„åŠŸèƒ½å·²ç¦ç”¨", 2)
end, 1)

CreatePremiumToggle("FOV", "æ˜¾ç¤ºç„å‡†FOV", true, function(value)
    Settings.FOVVisible = value
    if circle then
        circle.Visible = value and Settings.DrawFOV
    end
end, 2)

CreatePremiumSlider("Radius", "è‡ªç„è·ç¦»", 20, 200, Settings.AimRadius, function(value)
    Settings.AimRadius = value
    if circle then
        circle.Radius = value
    end
end, 3)

CreatePremiumSlider("Speed", "è‡ªç„é€Ÿåº¦", 0.5, 5.0, Settings.Speed.Base, function(value)
    Settings.Speed.Base = value
end, 4)


-- ğŸ–±ï¸ çª—å£æ‹–åŠ¨ç³»ç»Ÿ --
local dragging
local dragInput
local dragStart
local startPos

TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

TitleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UIS.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- âŒ¨ï¸ å¿«æ·é”®ç³»ç»Ÿ --
UIS.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == Enum.KeyCode.G then
            MainFrame.Visible = not MainFrame.Visible
            ShowCinematicNotification("æ–­æ¡¥æ®‹é›ª-æ§åˆ¶å°", MainFrame.Visible and "æ§åˆ¶å°å·²æ˜¾ç¤º" or "æ§åˆ¶å°å·²éšè—", 2)
        elseif input.KeyCode == Enum.KeyCode.H then
            getgenv().AimlockEnabled = not getgenv().AimlockEnabled
            ShowCinematicNotification("å¿«é€Ÿåˆ‡æ¢", getgenv().AimlockEnabled and "è‡ªç„å·²å¯ç”¨" or "è‡ªç„å·²ç¦ç”¨", 1.5)
        end
    end
end)

-- ğŸ¯ æ™ºèƒ½ç„å‡†ç³»ç»Ÿ --
local function GetOptimalSpeed(distance)
    local influence = math.clamp((distance - 30) / 100, 0, 1)
    local speed = Settings.Speed.Base
    speed = distance < 50 and (speed + Settings.Speed.CloseBoost * (1 - influence)) 
                          or (speed - Settings.Speed.FarReduce * influence)
    return math.clamp(speed, Settings.Speed.Min, Settings.Speed.Max)
end

local function GetSmartPrediction(targetPart, distance)
    local ratio = math.clamp(distance / Settings.Prediction.DistanceFactor, 0, 0.5)
    return math.max(Settings.Prediction.Base * (1 - ratio), Settings.Prediction.Min)
end

local function FindOptimalTarget()
    local bestTarget, minDist = nil, Settings.AimRadius + 1
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Client and player.Character then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            local head = player.Character:FindFirstChild("Head")
            
            if humanoid and humanoid.Health > 0 and head then
                local isEnemy = not Settings.TeamCheck or player.Team ~= Client.Team
                if isEnemy then
                    local dist = (head.Position - Camera.CFrame.Position).Magnitude
                    if dist < minDist then
                        minDist = dist
                        bestTarget = player
                    end
                end
            end
        end
    end
    
    return bestTarget, minDist
end

-- ğŸ”„ è¾“å…¥æ£€æµ‹ --
UIS.InputBegan:Connect(function(input)
    if input.UserInputType == Settings.AimlockKey and getgenv().AimlockEnabled ~= false then
        local target, dist = FindOptimalTarget()
        if target then
            getgenv().LockedTarget = target
            if Settings.DrawFOV and Settings.FOVVisible then
                ShowCinematicNotification("æ–­æ¡¥æ®‹é›ª-ç›®æ ‡é”å®š", "å·²é”å®š: "..target.Name.."\nè·ç¦»: "..math.floor(dist).."ç±³", 1.5)
            end
        end
    end
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Settings.AimlockKey then
        getgenv().LockedTarget = nil
    end
end)

-- ğŸ”„ ä¸»å¾ªç¯ --
RS.RenderStepped:Connect(function()
    if getgenv().AimlockEnabled == false then return end
    
    local target = getgenv().LockedTarget
    if not target or not target.Character then return end
    
    -- æ™ºèƒ½é”å¤´ç³»ç»Ÿ
    if Settings.CheckIfJumped then
        local humanoid = target.Character:FindFirstChildOfClass("Humanoid")
        Settings.AimPart = (humanoid and humanoid.FloorMaterial == Enum.Material.Air) and "Head" or Settings.OldAimPart
    end

    local part = target.Character:FindFirstChild(Settings.AimPart)
    if not part then return end
    
    local distance = (part.Position - Camera.CFrame.Position).Magnitude
    local prediction = GetSmartPrediction(part, distance)
    local optimalSpeed = GetOptimalSpeed(distance)
    local targetPos = part.Position + (part.Velocity / prediction)
    
    local screenPos = Camera:WorldToScreenPoint(targetPos)
    if screenPos.Z > 0 then
        mousemoverel(
            (screenPos.X - Mouse.X) * optimalSpeed,
            (screenPos.Y - Mouse.Y) * optimalSpeed
        )
    end
end)

-- ğŸŒˆ å¯è§†åŒ–FOV --
local circle = Drawing.new("Circle")
circle.Visible = Settings.DrawFOV and Settings.FOVVisible
circle.Radius = Settings.AimRadius
circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
circle.Color = Color3.fromRGB(180, 80, 255)
circle.Transparency = 0.7
circle.Thickness = 2
circle.Filled = false

RS.RenderStepped:Connect(function()
    if circle then
        circle.Position = Vector2.new(Mouse.X, Mouse.Y)
        circle.Visible = Settings.DrawFOV and Settings.FOVVisible and getgenv().AimlockEnabled ~= false
    end
end)

-- ğŸš€ åˆå§‹åŒ–å®Œæˆ --
ShowCinematicNotification("æ–­æ¡¥æ®‹é›ª-ç³»ç»Ÿå¯åŠ¨", "æ–­æ¡¥æ®‹é›ªè‡ªç„\nGé”®æ§åˆ¶æ˜¾ç¤º\å…³é—­", 3)

